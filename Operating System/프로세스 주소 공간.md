## 프로세스 주소공간
프로세스가 메모리를 할당 받으면, 메모리를 관리하기 위해 이 공간들을 어떤 구조로 관리하는데, 이를 프로세스 주소 공간이라고 함. 

![](https://blog.kakaocdn.net/dn/btQU6b/btr2Cxux6Jp/zfQ6xk8L96dwT31R4Lao21/img.png)

### Code(Text) 영역
- 프로그램 실행 파일 내의 명령어들이 위치하는 공간으로, 컴파일 시에 결정됨
- Read-Only로 수정할 수 없도록 저장되어 있음. 
- 같은 프로그램으로 실행된 여러 프로세스는 동일한 코드를 갖음. 
	   - 공유 메모리를 통해 내용 중복 할당하지 않게 만들어 메모리 사용량 절약
	
### Data 영역
- 전역변수/static 변수들이 위치함.
- 한 프로세스 내에 여러 스레드가 공통으로 공유하는 영역 
       - 메모리 사용량 절약
- 실행 중, 변수가 수정될 수 있어서 Read-Write로 지정
- 프로그램 실행 시 생성, 종료 시 소멸


### Heap 영역
- 동적할당(malloc(), new 등)을 위한 메모리 영역
- 런타임에 크기가 정해지고, 사용자에 의해 동적으로 할당/해제 됨
- 낮은 주소에서 높은 주소의 방향으로 할당됨
- 주로 객체가 저장되고, Garbage Collector에 의해 정리됨

### Stack 영역
-   지역/매개 변수가 저장되는 영역
- 함수의 호출과 함께 할당되고, 호출 완료 시 소멸함
- 메모리의 높은 주소에서 낮은 주소의 방향으로 할당됨 
- 재귀 함수가 너무 깊게 호출되거나, 지역변수가 너무 많아 stack 영역 초과 시, stack overflow 에러 발생함 

> **Q. 왜 Code 부분을 따로 두었나?**  
> Program의 Code는 Program이 만들어지고(컴파일되고) 나서는 바뀔 일이 전혀 없다. (따라서 Read Only)  
> 그렇기 때문에 같은 프로그램을 실행시켜 몇 개의 Prcess가 실행되더라도 같은 프로그램이라면 Code 부분은 다 똑같은 내용을 가지고 있게 된다.  
> 따라서 같은 Program의 Process일 경우 Code 부분을 공유(Share)하여 메모리 사용량을 줄이는 목적입니다.

> **Q. 왜 Stack 부분과 Data 부분을 나누었나?**  
> Stack 구조는 아래의 사진과 같이 이루어져 있다. (하단 부가 막혀있고 상단 부가 뚫려있는 구조)  
>![](https://blog.kakaocdn.net/dn/0rJ39/btrdd52dTar/kIosmdQdcPdEB9bx78zQkk/img.png)
> 따라서 한 쪽으로만 데이터를 집어 넣을 수 있고 꺼낼 때는 최근에 집어넣었던 것 부터 꺼낼 수 밖에 없는 구조 C언어를 예로 들면 함수의 호출이 stack 구조로 되어있다고 볼 수 있다.  
> 전역변수는 어떤 함수에서도 접근할 수 있기 때문에 Data로 따로 관리해준다.



[레페런스1](https://hojunking.tistory.com/51)
[레퍼런스2](https://yaelimeee.tistory.com/47)