## OSI 7계층 & TCP/IP 4계층
### **OSI 7계층**
#### - OSI 7계층이란?
* = Open Systems Interconnection
* 네트워크 통신이 일어나는 과정을 7단계로 나눠 정의한 국제 통신 표준 규약
* 7계층으로 나눈 이유?
  * 한눈에 흐름을 알아보기 쉽고 특정 단계에 이상이 생길 경우, 다른 단계의 장비 및 소프트웨어를 건들지 않고도 이상이 발생한 특정 단계만 고쳐 문제를 해결할 수 있음
  * 각 계층이 독립적인 역할 가능 -> 유지 및 관리가 수월하여 용이성 ↑
  * 계급과 상하구조 존재 : 각 계층은 하위 계층을 사용하고 현 계층의 기능을 포함하여 상위 계층에 제공(상위 계층들은 그 아래 하위 계층들을 모두 포함)
<br/>

#### - OSI 7계층 구조
* 물리 계층 (Physical Layer)
* 데이터 링크 계층 (Data Link Layer)
* 네트워크 계층 (Network Layer)
* 전송 계층 (Transport Layer)
* 세션 계층 (Session Layer)
* 표현 계층 (Presentation Layer)
* 응용 계층 (Application Layer) <br/>

<img src="https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/09/The-7-Layers-of-OSI.png?w=560&ssl=1"><br/>
<br/>

**1. 물리 계층 (Physical Layer)**
* = 데이터를 전기적인 신호로 변환해서 주고받는 기능만을 진행하는 계층
* 그저 데이터 '전달'에만 관여. 데이터 내용 or 에러에 대해선 관여 X
* 신호를 주고받기 위한 전기적, 기계적, 기능적인 특성을 이용해 데이터 전송
* 대역폭과 전송 효율이 중요!
* 데이터 단위 : 0, 1의 비트(Bit) -> On/Off 전기적 신호 상태로 이루어짐
* 장비 : 통신 케이블, 리피터, 허브, 모뎀 ..전기적 신호가 나가는 물리적인 장비
<br/>

**2. 데이터 링크 계층 (Data Link Layer)**
* = 물리 계층으로 송/수신되는 정보의 오류를 확인하고 흐름을 관리하는 등 여러 역할을 수행하여 안전한 정보의 전달을 수행할 수 있도록 하는 계층
* Goal : 오류 없는 통신
* MAC주소를 통해 통신 - 프레임에 MAC주소를 부여하고 에러 검출, 재전송, 흐름 제어 진행
  
  > MAC 주소란
    > * 컴퓨터 간의 데이터를 전송하기 위해 있는 컴퓨터의 물리적 및 하드웨어 주소
    > * == 그 기계의 고유번호 == 그 하드웨어만 가지고 있는 식별번호 == 주민번호
    > * IP주소(네트워크 계층에서 사용)는 변할 수 있지만 MAC주소(데이터 링크 계층에서 사용)는 변하지 않음
* 하드웨어와 소프트웨어 특성 모두 가져 연결다리 역할 <br/>
  -> 하드웨어적 특성을 가진 물리 계층과 소프트웨어적인 특성을 가진 네트워크 계층부터 상위 계층의 연결고리
* 데이터 단위 : 프레임(Frame)
* 장비 : 브릿지, 스위치, 이더넷 ..
* 심화
  * 데이터 링크 계층은 물리적으로 직접 연결된 서로 다른 2개의 네트워킹 장치 간의 데이터 전송을 담당
  * 이 계층에서 사용되는 다양한 프로토콜은 용도에 따라 프레임의 종류, 길이 등의 정보를 정의
  * MAC(Media Access Control)이라 하는 매체 접근 제어 기능O
  * 48비트 길이의 주소를 가짐
  * Point-To-Point간 신뢰성 있는 전송 보장을 위해 CRC기반의 오류 제어 필요
  * 아래와 같은 역할 수행을 통해 통신 중 오류를 제거
    
    * 프레이밍(Framing) : 물리 계층을 통해 수신한 신호를 조합하여 프레임 단위의 정해진 크기의 데이터 유닛으로 만들어 처리
    * 흐름 제어(Flow Control) : 송/수신 측 간 데이터를 주고받을 때, 너무 많거나 너무 적은 데이터를 송수신하지 않도록 데이터 흐름 제어(양측의 속도 차이 조정)
    * 오류 제어(Error Control) : 프레임 전송 시, 발생한 오류를 복원하거나 재전송
    * 접근 제어(Access Control) : 매체 상에 통신 주체가 여럿일 때, 데이터 전송 여부를 결정
    * 순서 제어(Order Control) : 프레임의 순서적 전송
    * 프레임 동기화(Frame Synchronization) : 프레임의 시작과 끝을 구별하기 위한 동기화(프레임 구분자)
<br/>

**3. 네트워크 계층 (Network Layer)**
* = 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능(라우팅)을 담당하는 계층
* 경로와 IP주소를 정하고, 데이터 전달 (이 때, 패킷 단위로 데이터 분할하여 전송한 후, 다시 합침)
* 라우팅, 흐름제어, 오류제어, 세그먼테이션 수행
* IP 주소를 제공하는 계층
* 최적 경로 설정이 중요
* 데이터 단위 : 패킷(Packet)
* 장비 : 라우터, IP 공유기
<br/>

**4. 전송 계층 (Transport Layer)**
* = 양 끝단의 사용자들이 신뢰성 있는 데이터를 주고 받을 수 있게 하는 계층
* 신뢰성 있고 효율적인 데이터 전송 위해 오류검출 및 복구, 흐름제어, 중복검사 etc 수행
* 데이터 전송 위해 Port 번호 사용
  * TCP와 UDP 프로토콜을 통해 통신 활성화
    * TCP : 신뢰성, 연결지향적 / UDP : 비신뢰성, 비연결성, 실시간
  * Port를 열어두고 프로그램들이 전송을 할 수 있도록 제공해줌
* End to End간 제어와 에러 관리 - 신뢰성 있는 통신 보장(패킷 전송이 유효한지 확인 및 전송 실패된 패킷 재전송)
* 데이터 단위 : 세그먼트(Segment)
* 장비 : 게이트웨이, L4 스위치
<br/>

**5. 세션 계층 (Session Layer)**
* = 통신 시스템 사용자 간의 연결(상호작용)을 설정, 유지, 동기화하는 계층
* 이 계층부턴 데이터를 만들어내는 과정
* 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법 정의
  * 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full Duplex)의 통신
  * 체크 포인팅
  * 유휴, 종료, 다시 시작 과정 등 수행
* Port번호를 기반으로 연결
* 연결 세션에서 데이터 교환과 에러 발생 시의 복구를 관리
* 데이터가 통신하기 위한 논리적 연결 담당 - TCP/IP 세션 생성 및 제거 역할
* 프로토콜 : API, Socket
<br/>

**6. 표현 계층 (Presentation Layer)**
* = 송/수신측 사이에서 전송하는 데이터의 형식(png, jpg, jpeg)을 결정하는 계층(ex. 데이터변환, 압축, 암호화.. )
* 데이터 표현에 대한 독립성 제공하고 암호화하는 역할
* 받은 데이터에 대해 코드 변환, 구문 검색, 압축, 인코딩을 통해 올바른 표준방식으로 변환
* 프로토콜 : JPEG, MPEG, SMB, ASCII
<br/>

**7. 응용 계층 (Application Layer)**
* = 최종 목적지로 응용SW를 도와주는(프로세스와 직접 관계하여 일반적인 응용서비스를 수행) 계층
* 사용자와 가장 가까운 계층으로, 사용자가 네트워크에 접근할 수 있도록 서비스 제공
* 사용자로부터 정보를 입력받아 하위 계층으로 전달하고 하위 계층에서 전송한 데이터를 사용자에게 전달
* 사용자 인터페이스, 파일 전송, 메일 전송, DB관리 등의 서비스 제공
* 프로토콜 : HTTP, SMTP, FTP
<br/>
<br/>

***
### **TCP/IP 4계층**
#### - IP란?
* = Internet Protocol
* 패킷 데이터들을 최대한 빨리 특정 목적지 주소로 보내는 프로토콜
* **빠른 전송**이 목적으로 패킷 전달 여부 및 순서 보증X & 패킷을 보낸 속도와 받는 속도가 다를 수 있음
<br/>

#### - TCP란?
* = Transmission Control Protocol
* 패킷을 정상적으로 받을 수 있도록 하는 프로토콜
* 패킷 통신 시, 순서가 뒤섞이거나 내용이 유실될 수 있다는 단점(데이터를 작은 단위로 나누어 전송하기 때문)에 대한 해결책
* **정확한 전송**이 목적으로 IP보다 패킷 전송 속도는 느리지만 패킷 전달 여부 보증O & 패킷을 송신 순서대로 받게 해줌
  * 목적지에 도착한 패킷들을 순서대로 정렬
  * 손상 및 손실된 패킷 존재 시, 출발지에 재요청
<br/>

#### - TCP/IP란?
* = 'TCP(전송 조절 프로토콜)와 IP(인터넷 프로토콜)' 2가지 프로토콜 방식을 조합하여 인터넷 통신을 하는 것
* 송신자가 수신자에게 IP를 사용하여 최대한 빠르게 패킷 전송 후, TCP를 활용해 패킷을 정상적으로 수신 받는 과정
* 이러한 복수의 프로토콜 집함을 프로토콜 스택(Protocol Stack) or 프로토콜 스위트(Protocol Suite)라고 부르며 서로 다른 프로토콜 스택끼린 통신 X
<br/>

#### - TCP/IP 4계층이란?
* = TCP/IP 프로토콜 통신 과정에 초점을 맞춰, OSI 7계층을 단순화한 계층
* 네트워크 전송 시, 데이터 표준을 정리한 것 : OSI 7계층, 이 이론을 실제 사용하는 인터넷 표준 : TCP/IP 4계층
* 각 계층별 처리 역할이 달라, 계층별 간섭 최소화 가능
* 특정 계층에서 문제 발생 시, 해당 계층만 고치면 되기 때문에 유지 보수 편리
* 데이터의 캡슐화와 은닉 가능 : 다른 계층끼리는 데이터의 전달 과정을 구체적으로 알 필요 X
* 캡슐화 = 데이터 전송 시, 데이터가 상위 계층->하위 계층으로 이동. 계층 간 데이터 이동마다 필요한 정보(헤더) 추가됨 
* 역캡슐화 = 데이터 수신 시, 데이터가 하위 계층->상위 계층으로 이동. 계층 간 데이터 이동마다 추가된 헤더를 읽고 알맞은 행동 취한 후에 헤더 제거
* 계층 별 추가되는 헤더
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FezkpmB%2FbtrEuQjONvp%2Fmc7GW3SNxmypplWwn0zqLK%2Fimg.png"><br/>
<br/>

#### - TCP/IP 4계층 구조
* 네트워크 액세스 계층 (Network Access Layer)
* 인터넷 계층 (Internet Layer)
* 전송 계층 (Transport Layer)
* 애플리케이션 계층 (Application Layer)

<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FV3PaG%2FbtrEtMCw2da%2FKi1cjiSeJkaHoQUNtrA2G0%2Fimg.png"><br/>
<br/>

**1. 네트워크 액세스 계층 (Network Access Layer)**
* = 데이터 전기 신호로 변환 후, 알맞은 기기로 전달하는 계층
* OSI 7계층의 물리 계층 + 데이터링크 계층
* 데이터 페킷을 전기 신호로 변환하여 선로 통해 전달할 수 있도록 준비
* 물리적 주소인 MAC 주소를 사용하여 알맞은 하드웨어로 데이터를 전달
* LAN, 패킷망 등에 사용
* 프로토콜 : 이더넷, Wi-Fi, PPP
<br/>

**2. 인터넷 계층 (Internet Layer)**
* = 패킷을 최종 목적지까지 전송하고 라우팅하는 계층
* OSI 7계층의 네트워크 계층
* IP를 담당하는 계층으로 IP를 사용하여 데이터의 원천지와 목적지에 관한 정보 첨부
* 프로토콜 : IP, ARP, RARP
<br/>

**3. 전송 계층 (Transport Layer)**
* = 통신 노드 간 신뢰성 있는 데이터 전송을 보장하는 계층
* OSI 7계층의 전송 계층
* TCP/UDP를 담당하는 계층으로 TCP를 사용하여 순서가 맞지 않거나 손실된 부분을 점검하여 재요청하는 일 담당
* 역캡슐화 과정에서 Port번호를 사용해 데이터를 정확한 애플리케이션에 전달하는 역할도 함

  > 네트워크 액세스 계층과 인터넷 계층 통해 데이터가 목적지 기기까지 정상적으로 도착했다면<br/>
    전송 계층에서는 Port번호 사용해 데이터를 목적지 기기 내 적절한 애플리케이션으로 전달함
* 프로토콜 : TCP, UDP, RTP, RTCP
<br/>

**4. 애플리케이션 계층 (Application Layer)**
* = 사용자와 소프트웨어 간 소통을 담당하는 계층
* OSI 7계층의 세션 게층 + 표현 계층 + 응용 계층
* 사용자와 가장 가까운 계층
* 애플리케이션을 실행하기 위한 데이터 형식이 작성됨
* 이 계층에서 서버나 TCP/UDP 기반의 클라이언트 응용 프로그램 동작 
* 프로토콜 : HTTP, HTTPS, FTP, SSH, Telnet, DNS
<br/>

***
### OSI 7계층과 TCP/IP 4계층 구조
<img src="https://velog.velcdn.com/images%2Fdyllis%2Fpost%2F7a6679e2-26e0-4d3e-b792-c866b9012226%2F%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C.png"><br/>
<br/>

***
### 참고
[[Network] OSI 7계층 정리, 각 계층별 설명](https://jungeun960.tistory.com/181)<br/>
[[네트워크] OSI 7 계층(OSI 7 Layer) 정리](https://turtledeveloper.tistory.com/38#google_vignette)<br/>
[OSI 7계층 정리](https://velog.io/@dyllis/OSI-7%EA%B3%84%EC%B8%B5-%EC%A0%95%EB%A6%AC)<br/>
[OSI 7계층 모델 - 핵심 총정리](https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-OSI-7%EA%B3%84%EC%B8%B5-%EC%A0%95%EB%A6%AC)<br/>
[TCP / IP 4계층 모델 - 핵심 총정리](https://inpa.tistory.com/329)<br/>
[TCP/IP 4계층(TCP/IP 4 Layer)](https://hahahoho5915.tistory.com/15#google_vignette)<br/>
[[Network] TCP/IP 와 TCP/IP 4계층이란?](https://wooono.tistory.com/507)<br/>
